"use strict";(function(){var a=[/^\/[a-z]{3}\d{3}\/?$/i,/^\/tips\/?$/,/^\/djmg\/?$/,/^\/sliver\/?$/,/^\/rogan\/?$/,/^\/farnam\/?$/,/^\/brain\/?$/,/^\/ltb\/?$/,/^\/fool\/?$/,/^\/take\/?$/,/^\/realvision\/?$/,/^\/strangeparts\/?$/,/^\/sysk\/?$/,/^\/twit\/?$/,/^\/tim\/?$/,/^\/built\/?$/,/^\/gmdl\/?$/,/^\/realvision\/?$/,/^\/burr\/?$/,/^\/strangeparts\/?$/,/^\/outerheaven\/?$/,/^\/gigz\/?$/,/^\/starsnipe\/?$/,/^\/disrupt\/?$/,/^\/stevemould\/?$/,/^\/de\/chip\/?$/,/^\/r\/[a-z]{3}\d{3}\/?$/i];function b(){return document.documentElement.dataset.staticRefCode||a.some(function(a){return a.test(location.pathname)})}function c(a){return["beta","dev","nightly"].includes(a)}function d(){var a="",b;if(window.URLSearchParams?(b=new URLSearchParams(location.search),a=b.get("ref")&&b.get("ref").match(/^([A-Za-z]{3}-?[0-9]{3})(?:\/|$)/)):a=location.search.match(/(?:\?|&)ref=([A-Za-z]{3}-?[0-9]{3})(?:\/|$|&)/),a)return a[1];if(/^\/[A-Za-z]{3}-?[0-9]{3}\/?$/.test(location.pathname))return location.pathname.substr(1)}function e(){if(location.search){var a=d();a&&(localStorage.setItem("ref",a.toUpperCase()),localStorage.setItem("refDate",Date.now()))}}function f(){localStorage.removeItem("ref"),localStorage.removeItem("refDate")}function g(a){return a&&(Date.now()-a)/864e5<=7}function h(){return{code:localStorage.getItem("ref"),date:localStorage.getItem("refDate")}}function i(){var a,d,e,i,j;b()||(a=h(),g(a.date)?(d=document.querySelectorAll("[data-allows-dynamic-ref-code='true']","[href^='//geo.itunes.apple.com/us/app/brave-web-browser']","[href^='https://play.google.com/store/apps/details?id=com.brave.browser']","[href^='https://laptop-updates.brave.com/download']"),e=is_iOS()?"https://laptop-updates.brave.com/download/ios/".concat(a.code):"https://laptop-updates.brave.com/download/".concat(a.code),i="https://laptop-updates.brave.com/download/desktop/direct/osx/release/".concat(a.code),j="https://laptop-updates.brave.com/download/desktop/direct/osxarm64/release/".concat(a.code),forEach(d,function(a){var b=new URL(a.href),d=a.dataset.modalId||b.hash&&location.origin===b.origin&&location.pathname===b.pathname;!c(a.dataset.buildChannel)&&!d&&a.dataset.allowsDynamicRefCode&&(a.dataset.macArch==="osx"?a.href=i:a.dataset.macArch==="osxarm64"?a.href=j:a.href=e)})):f())}window.addEventListener("DOMContentLoaded",function(){e(),i()})})()